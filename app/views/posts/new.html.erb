<% content_for :head do %>
	<%# stylesheet_link_tag "canvas" %>
	<%= javascript_include_tag "lib/jquery.form" %>
	<%= javascript_include_tag "lib/processing-1.3.6" %>
	<%= javascript_include_tag "canvas_upload" %>
	<% if action_name == 'new_child' %>
		<script type="text/javascript">
			$(document).ready(function(){
				// see processingReady()
				pjsReadyFn['load_image_for_edit'] = function() {
					loadRemoteImage('<%= @post_parent.photo.url(:medium) if @post_parent.photo.exists? %>');
				}
			});
		</script>
	<% end %>
<% end %>

<div id="actions">
	<select id="select_tool" class="grey select_tool">
		<option value="0" selected="yes">Crop &amp; Scale</option>
		<option value="1">Ellipse</option>
		<option value="2">Rectangle</option>
	</select>
	<a href="#" id="undo" class="btn">Undo</a>
	<!--<a data-toggle="modal" data-target="#save_post_modal" id="save_post" class="btn btn-primary">Save</a>-->
</div>

<div id="drop_area"><span>Drop an image file here (JPEG or PNG, Any Size)</span></div>

<div id="canvas_container">
	<canvas datasrc="/assets/framework.pjs /assets/tools.pjs" id="canvas" tabindex="0">
	<%# <canvas datasrc="/assets/crop_and_save.pjs" id="canvas" tabindex="0"> %>
		<p>Sorry, you should really upgrade your browser.</p>
	</canvas>
</div>
<%= render 'form' %>
<%# link_to 'Back', posts_path %>
