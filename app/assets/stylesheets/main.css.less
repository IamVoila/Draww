/**
 * Main Draww stylesheet.
 */


// Twitter Bootstrap -----------------------------------------------------------


// CSS Reset
@import "twitter/bootstrap/reset";

// Core variables and mixins
@import "twitter/bootstrap/variables"; // Modify this for custom colors, font-sizes, etc
@import "twitter/bootstrap/mixins";

// Grid system and page structure
@import "twitter/bootstrap/scaffolding";
@import "twitter/bootstrap/grid";
@import "twitter/bootstrap/layouts";

// Base CSS
@import "twitter/bootstrap/type";
@import "twitter/bootstrap/code";
@import "twitter/bootstrap/forms";
@import "twitter/bootstrap/tables";

// Components: Buttons & Alerts
@import "twitter/bootstrap/buttons";
@import "twitter/bootstrap/button-groups";
@import "twitter/bootstrap/alerts"; // Note: alerts share common CSS with buttons and thus have styles in buttons

// Components: Popovers
@import "twitter/bootstrap/modals";
@import "twitter/bootstrap/tooltip";
@import "twitter/bootstrap/popovers";

// Components: Misc
@import "twitter/bootstrap/progress-bars";

// Utility classes
@import "twitter/bootstrap/utilities"; // Has to be last to override when necessary


// General ---------------------------------------------------------------------

body {
    padding:70px 0;
}

#container {
    width:1260px;
    margin:0 auto;
    // Note: All these extra rules come from bootstrap .container
    // Not sure if they're even necessary
    position: relative;
    *zoom: 1;
    &:before,
    &:after {
        display: table;
        line-height: 0;
        content: "";
    }
    &:after {
        clear: both;
    }
}

// Navigation ------------------------------------------------------------------

#navbar {
    position:fixed;
    top:0; left:0;
    width:100%;
    z-index:10;
    .inner {
        position:relative;
        width:1260px;
        margin:0 auto;
    }
        .brand { float:left; margin-left:5px; }
        .actions {
            position:absolute;
            top:0; right:0;
            margin-right:5px;
            list-style:none;
            li {
                float:left;
                margin-left:10px;
                a {
                    display:block;
                    height:35px;
                    line-height:35px;
                    padding:0 20px;
                    background:#777;
                    .border-radius(0 0 5px 5px);
                    text-decoration:none;
                    font-weight:bold;
                    color:#fff;
                    &:hover {
                        background:#888;
                    }
                }
                ul {
                    display:none;
                    list-style:none;
                    padding:0; margin:0;
                }
            }
            .dropdown {
                &:hover {
                    ul { display:block; }
                    a { .border-radius(0); }
                    li:last-child a { .border-radius(0 0 5px 5px); }
                }
                ul li {
                    margin:0;
                    display:block;
                    float:none;
                }
            }
        }
}

// Responsive layout adjustments -----------------------------------------------

// HTC sensation XE resolution 540px
// Iphone 4: 640px
@media screen and (max-width:1260px) { // 7 wide
    #container, #navbar .inner { width:1080px; } // 6 wide
}
@media screen and (max-width:1080px) {
    #container, #navbar .inner { width:900px; } // 5 wide
}
@media screen and (max-width:900px) {
    #container, #navbar .inner { width:720px; } // 4 wide
}
@media screen and (max-width:720px) {
    #container, #navbar .inner { width:540px; } // 3 wide
}


// Image Grid (home page) ------------------------------------------------------

.thumb {
    margin:5px;
    display:inline-block;

    position:relative;
    .overlay {
        display:none;
        position:absolute;
        top:0; right:0;
        background:rgba(0,0,0,0.5);
        width:100%; height:100%;
        .actions {
            margin-top:55px;
            text-align:center;
            a img { .transition(opacity 0.3s); }
            a:hover img {
                opacity:0.7;
            }
        }
        &.loading {
            display:block;
            .actions { display:none; }
            background:rgba(0,0,0,0.5) url('/assets/spinner.svg') center center no-repeat;
        }
    }
    &:hover .overlay { display:block; }
}

// posts/show (inside image grid) ----------------------------------------------

.show {
    margin: 5px;
    .actions {
        float:left;
        a {
            .size(80px, 80px);
            margin:10px 10px 10px 0;
            display:block;
            float:left;
            background-color:#777;
            background-position: center center;
            background-repeat: no-repeat;
            .border-radius(5px);
            span { display:none; }
            &:hover { background-color: #888; }
        }
            .edit       { background-image: url('/assets/edit.svg'); }
            .comments   { background-image: url('/assets/comments.svg'); }
            .vote {
                line-height:80px;
                text-align:center;
                font-weight:bold;
                font-size:18px;
                color:#fff;
                span { display:block; }
                &:hover {
                    span { display:none; }
                    background-image: url('/assets/like.svg');
                }
            }
    }
    .title {
        float:left;
        width:260px;
        margin-top:5px;
        h1 { font-size:28px; line-height:30px; }
        .by {
            font-weight:normal;
            font-size:18px;
            white-space: nowrap;
        }
    }
}
    .push-left { float:left; }
    .push-right { float:right; }
    
    
// New Image (inside image grid) -----------------------------------------------


#index .new_post {
    .size(710px, 530px);
    overflow:hidden;
    margin:5px;
    float:left;
    &.loading {
        background:#ccc url('/assets/spinner.svg') center center no-repeat;
    }
    // form
    .field { display:inline-block; }
}

    #drop_area {
        width:530px;
        height:530px;
        background:#ccc url('/images/drop_area.png') center center no-repeat;
        span { display:none; }
        &.over {
            background-color:#eee;
        }
        &.loading {
            background-image:url('/assets/spinner.svg');
        }
    }
    
    .actions {
        .tool {
            .size(50px,50px);
            margin:10px 10px 10px 0;
            float:left;
            background:#999;
            color:#fff;
            line-height:50px;
            cursor: pointer;
        }
    }

// Preloading (divs at bottom of applicatikon layout) --------------------------


.preload {
    width:0; height:0; overflow:hidden;
    .vote       { background: url('/assets/like.svg'); }
    .spinner    { background: url('/assets/spinner.svg'); }
}